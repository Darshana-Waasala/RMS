<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>

</head>
<body>

<h2>JavaScript Loops</h2>
<button onclick="myFunction()">Click me</button>
<p id="demo"></p>

<script>

function myFunction() {
	console.log("in the function");
	var exampleSocket = new String("http://localhost:13337/", "protocolOne");
	if ('WebSocket' in window){
	   	console.log("/* WebSocket is supported. You can proceed with your code*/")
		var connection = new WebSocket('ws://localhost:13337');
		
		connection.onopen = function(){
		   /*Send a small message to the console once the connection is established */
		console.log('Connection open!');
		connection.send('Hey server, whats up?');
		}



		connection.onerror = function(error){
		   console.log('Error detected: ' + error);
		}

		connection.onmessage = function(e){
		   var server_message = e.data;
		   console.log(server_message);
		}


		connection.onclose = function(){
		   console.log('Connection closed');
		}

	} else {
		console.log("/*WebSockets are not supported. Try a fallback method like long-polling etc*/")
	}
	//this.exampleSocket.send("Here's some text that the server is urgently awaiting!");
}
document.getElementById("demo").innerHTML = text;
</script>

</body>
</html>
